env HOME=$WORK/home
env $=$

! unparam .
stderr 'fooUnused .* unused'
! stderr 'footestUnused .* unused'
! stderr 'footestpkgUnused .* unused'

! unparam -tests=true .
stderr 'fooUnused .* unused'
stderr 'footestUnused .* unused'
stderr 'footestpkgUnused .* unused'

-- go.mod --
module testdata.tld/foo
-- foo.go --
package foo

func fooUnused(a, b int) int {
	return a + 123
}
-- foo_test.go --
package foo

func footestUnused(a, b int) int {
	return a + 123
}
-- foopkg_test.go --
package foo_test

func footestpkgUnused(a, b int) int {
	return a + 123
}
